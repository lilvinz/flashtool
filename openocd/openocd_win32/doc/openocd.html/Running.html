<html lang="en">
<head>
<title>Running - OpenOCD User's Guide</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="OpenOCD User's Guide">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="prev" href="About-Jim_002dTcl.html#About-Jim_002dTcl" title="About Jim-Tcl">
<link rel="next" href="OpenOCD-Project-Setup.html#OpenOCD-Project-Setup" title="OpenOCD Project Setup">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This User's Guide documents
release 0.7.0-dev,
dated 24 March 2013,
of the Open On-Chip Debugger (OpenOCD).
   * Copyright (C) 2008 The OpenOCD Project

   * Copyright (C) 2007-2008 Spencer Oliver <spen@spen-soft.co.uk>

   * Copyright (C) 2008-2010 Oyvind Harboe <oyvind.harboe@zylin.com>

   * Copyright (C) 2008 Duane Ellis <openocd@duaneellis.com>

   * Copyright (C) 2009-2010 David Brownell
     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.2 or any later version published by the Free Software
     Foundation; with no Invariant Sections, with no Front-Cover Texts,
     and with no Back-Cover Texts.  A copy of the license is included
     in the section entitled ``GNU Free Documentation License''.
-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Running"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="OpenOCD-Project-Setup.html#OpenOCD-Project-Setup">OpenOCD Project Setup</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="About-Jim_002dTcl.html#About-Jim_002dTcl">About Jim-Tcl</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="index.html#Top">Top</a>
<hr>
</div>

<h2 class="chapter">4 Running</h2>

<p><a name="index-command-line-options-14"></a><a name="index-logfile-15"></a><a name="index-directory-search-16"></a>
Properly installing OpenOCD sets up your operating system to grant it access
to the debug adapters.  On Linux, this usually involves installing a file
in <samp><span class="file">/etc/udev/rules.d,</span></samp> so OpenOCD has permissions.  MS-Windows needs
complex and confusing driver configuration for every peripheral.  Such issues
are unique to each operating system, and are not detailed in this User's Guide.

<p>Then later you will invoke the OpenOCD server, with various options to
tell it how each debug session should work. 
The <samp><span class="option">--help</span></samp> option shows:
<pre class="verbatim">bash$ openocd --help

--help       | -h       display this help
--version    | -v       display OpenOCD version
--file       | -f       use configuration file &lt;name>
--search     | -s       dir to search for config files and scripts
--debug      | -d       set debug level &lt;0-3>
--log_output | -l       redirect log output to file &lt;name>
--command    | -c       run &lt;command>
</pre>

<p>If you don't give any <samp><span class="option">-f</span></samp> or <samp><span class="option">-c</span></samp> options,
OpenOCD tries to read the configuration file <samp><span class="file">openocd.cfg</span></samp>. 
To specify one or more different
configuration files, use <samp><span class="option">-f</span></samp> options. For example:

<pre class="example">     openocd -f config1.cfg -f config2.cfg -f config3.cfg
</pre>
<p>Configuration files and scripts are searched for in
     <ol type=1 start=1>
<li>the current directory,
<li>any search dir specified on the command line using the <samp><span class="option">-s</span></samp> option,
<li>any search dir specified using the <samp><span class="command">add_script_search_dir</span></samp> command,
<li><samp><span class="file">$HOME/.openocd</span></samp> (not on Windows),
<li>the site wide script library <samp><span class="file">$pkgdatadir/site</span></samp> and
<li>the OpenOCD-supplied script library <samp><span class="file">$pkgdatadir/scripts</span></samp>.
     </ol>
The first found file with a matching file name will be used.

<blockquote>
<b>Note:</b> Don't try to use configuration script names or paths which
include the "#" character.  That character begins Tcl comments. 
</blockquote>

<h3 class="section">4.1 Simple setup, no customization</h3>

<p>In the best case, you can use two scripts from one of the script
libraries, hook up your JTAG adapter, and start the server ... and
your JTAG setup will just work "out of the box".  Always try to
start by reusing those scripts, but assume you'll need more
customization even if this works.  See <a href="OpenOCD-Project-Setup.html#OpenOCD-Project-Setup">OpenOCD Project Setup</a>.

<p>If you find a script for your JTAG adapter, and for your board or
target, you may be able to hook up your JTAG adapter then start
the server like:

<pre class="example">     openocd -f interface/ADAPTER.cfg -f board/MYBOARD.cfg
</pre>
<p>You might also need to configure which reset signals are present,
using <samp><span class="option">-c 'reset_config trst_and_srst'</span></samp> or something similar. 
If all goes well you'll see output something like

<pre class="example">     Open On-Chip Debugger 0.4.0 (2010-01-14-15:06)
     For bug reports, read
             http://openocd.sourceforge.net/doc/doxygen/bugs.html
     Info : JTAG tap: lm3s.cpu tap/device found: 0x3ba00477
            (mfg: 0x23b, part: 0xba00, ver: 0x3)
</pre>
<p>Seeing that "tap/device found" message, and no warnings, means
the JTAG communication is working.  That's a key milestone, but
you'll probably need more project-specific setup.

<h3 class="section">4.2 What OpenOCD does as it starts</h3>

<p>OpenOCD starts by processing the configuration commands provided
on the command line or, if there were no <samp><span class="option">-c command</span></samp> or
<samp><span class="option">-f file.cfg</span></samp> options given, in <samp><span class="file">openocd.cfg</span></samp>. 
See <a href="Configuration-Stage.html#Configuration-Stage">Configuration Stage</a>. 
At the end of the configuration stage it verifies the JTAG scan
chain defined using those commands; your configuration should
ensure that this always succeeds. 
Normally, OpenOCD then starts running as a daemon. 
Alternatively, commands may be used to terminate the configuration
stage early, perform work (such as updating some flash memory),
and then shut down without acting as a daemon.

<p>Once OpenOCD starts running as a daemon, it waits for connections from
clients (Telnet, GDB, Other) and processes the commands issued through
those channels.

<p>If you are having problems, you can enable internal debug messages via
the <samp><span class="option">-d</span></samp> option.

<p>Also it is possible to interleave Jim-Tcl commands w/config scripts using the
<samp><span class="option">-c</span></samp> command line switch.

<p>To enable debug output (when reporting problems or working on OpenOCD
itself), use the <samp><span class="option">-d</span></samp> command line switch. This sets the
<samp><span class="option">debug_level</span></samp> to "3", outputting the most information,
including debug messages. The default setting is "2", outputting only
informational messages, warnings and errors. You can also change this
setting from within a telnet or gdb session using <samp><span class="command">debug_level
&lt;n&gt;</span></samp> (see <a href="debug_005flevel.html#debug_005flevel">debug_level</a>).

<p>You can redirect all output from the daemon to a file using the
<samp><span class="option">-l &lt;logfile&gt;</span></samp> switch.

<p>Note! OpenOCD will launch the GDB &amp; telnet server even if it can not
establish a connection with the target. In general, it is possible for
the JTAG controller to be unresponsive until the target is set up
correctly via e.g. GDB monitor commands in a GDB init script.

</body></html>

